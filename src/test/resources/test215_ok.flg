type abc = a | b | c | d | e | f

fun max(X: abc, Y: abc) : abc =
  match (X, Y) with
  | (f, _) | (_, f) => f
  | (e, _) | (_, e) => e
  | (d, _) | (_, d) => d
  | (c, _) | (_, c) => c
  | (b, _) | (_, b) => b
  | _ => a
  end
  
input bar(abc)
bar(a).
bar(b).
bar(c).


output foo(abc, abc<max,a>)
foo(X, X) :- bar(X).
foo(X, Y) :- bar(X), bar(Y).
foo(d, e).
foo(d, f).

output not_ok
not_ok :- foo(X, Y), (X != d && Y != c) || (X = d && Y != f).
not_ok :- foo(a, a).
not_ok :- foo(a, b).
not_ok :- foo(b, a).
not_ok :- foo(b, b).
not_ok :- foo(c, a).
not_ok :- foo(c, b).

output ok
ok :- foo(a, c), foo(b, c), foo(c, c), foo(d, f), !not_ok. 